{"version":3,"sources":["components/Home.tsx","actions/actionConstants.ts","actions/kid.ts","components/Login.tsx","containers/Login.tsx","components/MessageBox.tsx","containers/MessageBox.tsx","components/AppDrawer.tsx","containers/AppDrawer.tsx","components/Kids.tsx","appConstants.ts","actions/messageConstants.ts","containers/Kids.tsx","App.tsx","reducers/kid.ts","services/api.ts","sagas/kidList.ts","serviceWorker.ts","index.tsx"],"names":["Home","kidCLass","localStorage","getItem","console","log","react_default","a","createElement","react_router","to","concat","GETKIDLIST_START","GETCLASSLIST_START","SEND_MESSAGES_START","UPDATE_AIRTABLE_START","LOGIN_NOTIFICATION","sendMessages","start","kidList","messageType","type","ActionType","payload","success","kid","failure","error","updateAirTable","getKidList","params","result","getClassList","classes","notifyLogin","loginUser","Login","_ref","localStore","JSON","parse","name","err","className","src","facebook_login_with_button_default","appId","fields","textButton","callback","response","email","picture","data","url","id","setItem","stringify","setTimeout","window","location","href","cssClass","connect","state","dispatch","bindActionCreators","src_components_Login","MessageBox","message","_React$useState","React","useState","_React$useState2","Object","slicedToArray","open","setOpen","handleClose","useEffect","Dialog","onClose","aria-labelledby","aria-describedby","fullWidth","DialogTitle","title","DialogContent","DialogContentText","content","DialogActions","Button","onClick","color","autoFocus","components_MessageBox","useStyles","makeStyles","list","width","fullList","AppDrawer","_ref$classList","classList","side","top","left","bottom","right","setState","toggleDrawer","event","objectSpread","defineProperty","IconButton","edge","aria-label","Menu_default","Drawer","role","List","ListItem","button","key","ListItemIcon","AssignmentInd","ListItemText","primary","Divider","map","item","index","Fragment","component","reload","style","backgroundColor","borderStyle","borderColor","borderWidth","borderRadius","Favorite","disableTypography","Typography","toUpperCase","undefined","getClassListStart","components_AppDrawer","Kids","_ref$kidList","_ref$selectKid","selectKid","_ref$isLoading","isLoading","_ref$sendMessages","getKidListStart","_ref$filterKid","filterKid","_ref$filterVal","filterVal","_ref$selectAll","selectAll","_ref$unselectAll","unselectAll","_ref$search","search","searchVal","react","theme","createStyles","root","display","flexWrap","justifyContent","overflow","gridListTile","justify","alignItems","icon","margin","spacing","rightIcon","marginLeft","flexGrow","menuButton","marginRight","redIcon","greenIcon","yellowIcon","greyIcon","marginIcon","progress","fab","extendedIcon","formControl","minWidth","selectEmpty","marginTop","position","shape","fade","palette","common","white","&:hover","breakpoints","up","searchIcon","height","pointerEvents","inputRoot","inputInput","padding","fontSize","transition","transitions","create","toolbar","mixins","grow","gridListTileSelected","tileWidthPerc","getGridListCols","useTheme","numTiles","useMediaQuery","gridListTileStyle","filterKids","filter","searchFound","khongDau","toLowerCase","includes","filterFound","status","isDisabled","isSelected","length","inputStr","str","replace","trim","anchorEl","setAnchorEl","handleMenuClose","Container","AppBar","Toolbar","containers_AppDrawer","Search_default","InputBase","placeholder","onChange","target","value","input","inputProps","currentTarget","MoreVert_default","Menu","keepMounted","Boolean","MenuItem","disabled","paddingLeft","paddingRight","LinearProgress","Box","Select","InputLabel","GridList","cols","GridListTile","avatar","alt","GridListTileBar","actionIcon","CheckCircle_default","FiberManualRecord_default","containers_MessageBox","withRouter","kids","kidClass","keyword","match","components_Kids","App","Helmet","path","exact","initialState","kidReducer","arguments","action","toConsumableArray","i","AIRTABLE_API_CONFIG","baseURL","timeout","getKidListFactory","optionConfig","config","instance","axios","asyncToGenerator","regenerator_default","mark","_callee","requestUrl","currentDay","wrap","_context","prev","next","get","sent","Error","Date","getDate","records","val","Id","Name","contactIds","hasOwnProperty","ContactIds","split","Avatar","sendLog","SendLog","recordId","class","abrupt","t0","stop","_x","apply","this","getClassListFactory","_ref2","_callee2","_context2","ClassName","updateAirTableFactory","_ref3","_callee3","currentDate","loginUserName","requestBody","jsonStr","_context3","toLocaleString","toString","patch","_x2","CHATFUEL_TOKEN","CHATFUEL_API_CONFIG","sendMessagesFactory","_ref4","_callee4","sendResult","blockName","contactId","sendService","postRequest","sendBlock","zaloId","_context4","encodeURI","startsWith","post","t1","_x3","_x4","notifyLoginFactory","_ref5","_callee5","_context5","_x5","runGetKidList","watchGetKidList","runGetClassList","watchGetClassList","runSendMessages","watchSendMessages","runUpdateAirTable","watchUpdateAirTable","runNotifyLogin","watchNotifyLogin","rootSaga","api","call","put","_marked","takeLatest","_marked2","_marked3","_marked4","_marked5","_context6","_marked6","_context7","_marked7","_context8","_marked8","_context9","_marked9","_context10","_marked10","_context11","all","fork","_marked11","hostname","sagaMiddleWare","createSagaMiddleware","store","createStore","reducer","composeWithDevTools","applyMiddleware","ReactDOM","render","es","react_router_dom","src_App_0","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister","run"],"mappings":"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","file":"static/js/main.c13e9910.chunk.js","sourcesContent":["import React, { FC } from 'react';\nimport { Redirect } from 'react-router-dom';\n\nconst Home: FC = () => {\n\n  let kidCLass = localStorage.getItem(\"class\");\n  // alert(\"Home \" + kidCLass);\n  console.log(\"Home\");\n  console.log(kidCLass);\n  if (kidCLass) {\n    return (<Redirect to={`/${kidCLass}`} />);\n  }\n\n  return (<Redirect to={'/Red'} />);\n};\n\nexport default Home;\n","export const SELECT_KID = \"SELECT_KID\";\r\nexport const SELECT_ALL = \"SELECT_ALL\";\r\nexport const UNSELECT_ALL = \"UNSELECT_ALL\";\r\n\r\nexport const FILTER_KID = \"FILTER_KID\";\r\nexport const SEARCH = \"SEARCH\";\r\n\r\nexport const GETKIDLIST_START = \"GETKIDLIST_START\";\r\nexport const GETKIDLIST_SUCCESS = \"GETKIDLIST_SUCCESS\";\r\nexport const GETKIDLIST_FAILURE = \"GETKIDLIST_FAILURE\";\r\n\r\nexport const GETCLASSLIST_START = \"GETCLASSLIST_START\";\r\nexport const GETCLASSLIST_SUCCESS = \"GETCLASSLIST_SUCCESS\";\r\nexport const GETCLASSLIST_FAILURE = \"GETCLASSLIST_FAILURE\";\r\n\r\nexport const SEND_MESSAGES = \"SEND_MESSAGES\";\r\n\r\nexport const SEND_MESSAGES_START = \"SEND_MESSAGES_START\";\r\nexport const SEND_MESSAGES_SUCCESS = \"SEND_MESSAGES_SUCCESS\";\r\nexport const SEND_MESSAGES_FAILURE = \"SEND_MESSAGES_FAILURE\";\r\n\r\nexport const UPDATE_AIRTABLE_START = \"UPDATE_AIRTABLE_START\";\r\nexport const UPDATE_AIRTABLE_SUCCESS = \"UPDATE_AIRTABLE_SUCCESS\";\r\nexport const UPDATE_AIRTABLE_FAILURE = \"UPDATE_AIRTABLE_FAILURE\";\r\n\r\nexport const LOGIN_NOTIFICATION = \"LOGIN_NOTIFICATION\";\r\n","import { Kid, LoginUser } from \"../services/models\";\nimport { AxiosError } from 'axios';\nimport * as ActionType from './actionConstants';\nimport * as MessageType from './messageConstants';\n\n// export enum ActionType {\n//   SELECT = \"KID/SELECT\",\n//   GETKIDLIST_START = \"GETKIDLIST_START\",\n//   GETKIDLIST_SUCCESS = \"GETKIDLIST_SUCCESS\",\n//   GETKIDLIST_FAILURE = \"GETKIDLIST_FAILURE\",\n// }\n\n// export interface KidAction {\n//   type: string;\n//   id: number;\n// }\n\nexport const selectKid = (id: string) => ({\n  type: ActionType.SELECT_KID as typeof ActionType.SELECT_KID,\n  payload: id,\n});\n\nexport const selectAll = (kidList: Kid[]) => ({\n  type: ActionType.SELECT_ALL as typeof ActionType.SELECT_ALL,\n  payload: kidList,\n});\n\nexport const unselectAll = (kidList: Kid[]) => ({\n  type: ActionType.UNSELECT_ALL as typeof ActionType.UNSELECT_ALL,\n  payload: kidList,\n});\n\nexport const search = (keyword: string) => ({\n  type: ActionType.SEARCH as typeof ActionType.SEARCH,\n  payload: keyword,\n});\n\nexport const filterKid = (filterVal: string) => ({\n  type: ActionType.FILTER_KID as typeof ActionType.FILTER_KID,\n  payload: filterVal,\n});\n\nexport const sendMessagesTest = (kidList: Kid[]) => ({\n  type: ActionType.SEND_MESSAGES as typeof ActionType.SEND_MESSAGES,\n  payload: kidList,\n});\n\nexport const sendMessages = {\n  start: (kidList: Kid[], messageType: string) => ({\n    type: ActionType.SEND_MESSAGES_START as typeof ActionType.SEND_MESSAGES_START,\n    payload: { kidList, messageType },\n  }),\n\n  success: (kid: Kid) => ({\n    type: ActionType.SEND_MESSAGES_SUCCESS as typeof ActionType.SEND_MESSAGES_SUCCESS,\n    payload: kid,\n  }),\n\n  failure: (error: AxiosError) => ({\n    type: ActionType.SEND_MESSAGES_FAILURE as typeof ActionType.SEND_MESSAGES_FAILURE,\n    payload: error,\n  }),\n};\n\nexport const updateAirTable = {\n  start: (kidList: Kid[]) => ({\n    type: ActionType.UPDATE_AIRTABLE_START as typeof ActionType.UPDATE_AIRTABLE_START,\n    payload: kidList\n  }),\n\n  success: (kid: Kid) => ({\n    type: ActionType.UPDATE_AIRTABLE_SUCCESS as typeof ActionType.UPDATE_AIRTABLE_SUCCESS,\n    payload: kid,\n  }),\n\n  failure: (error: AxiosError) => ({\n    type: ActionType.UPDATE_AIRTABLE_FAILURE as typeof ActionType.UPDATE_AIRTABLE_FAILURE,\n    payload: error,\n  }),\n};\n\nexport const getKidList = {\n  start: (params: string) => ({\n    type: ActionType.GETKIDLIST_START as typeof ActionType.GETKIDLIST_START,\n    payload: params,\n  }),\n\n  success: (result: Kid[]) => ({\n    type: ActionType.GETKIDLIST_SUCCESS as typeof ActionType.GETKIDLIST_SUCCESS,\n    payload: result,\n  }),\n\n  failure: (params: AxiosError) => ({\n    type: ActionType.GETKIDLIST_FAILURE as typeof ActionType.GETKIDLIST_FAILURE,\n    payload: params,\n  }),\n};\n\nexport const getClassList = {\n  start: () => ({\n    type: ActionType.GETCLASSLIST_START as typeof ActionType.GETCLASSLIST_START,\n  }),\n\n  success: (classes: string[]) => ({\n    type: ActionType.GETCLASSLIST_SUCCESS as typeof ActionType.GETCLASSLIST_SUCCESS,\n    payload: classes,\n  }),\n\n  failure: (params: AxiosError) => ({\n    type: ActionType.GETCLASSLIST_FAILURE as typeof ActionType.GETCLASSLIST_FAILURE,\n    payload: params,\n  }),\n};\n\nexport const notifyLogin = (loginUser: LoginUser) => ({\n  type: ActionType.LOGIN_NOTIFICATION as typeof ActionType.LOGIN_NOTIFICATION,\n  payload: loginUser,\n});\n\nexport type Action =\n  | ReturnType<typeof notifyLogin>\n  | ReturnType<typeof sendMessagesTest>\n  | ReturnType<typeof selectKid>\n  | ReturnType<typeof selectAll>\n  | ReturnType<typeof unselectAll>\n  | ReturnType<typeof filterKid>\n  | ReturnType<typeof search>\n  | ReturnType<typeof updateAirTable.start>\n  | ReturnType<typeof updateAirTable.success>\n  | ReturnType<typeof updateAirTable.failure>\n  | ReturnType<typeof sendMessages.start>\n  | ReturnType<typeof sendMessages.success>\n  | ReturnType<typeof sendMessages.failure>\n  | ReturnType<typeof getKidList.start>\n  | ReturnType<typeof getKidList.success>\n  | ReturnType<typeof getKidList.failure>\n  | ReturnType<typeof getClassList.start>\n  | ReturnType<typeof getClassList.success>\n  | ReturnType<typeof getClassList.failure>;\n","import React, { FC } from 'react';\r\nimport FacebookLogin from 'react-facebook-login';\r\n// import FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { LoginUser } from '../services/models';\r\nimport Box from '@material-ui/core/Box';\r\nimport './Login.css';\r\n\r\ninterface LoginUserProps {\r\n  notifyLogin: (loginUser: LoginUser) => void;\r\n}\r\n\r\nconst Login: FC<LoginUserProps> = ({\r\n  notifyLogin\r\n}) => {\r\n  try {\r\n\r\n    let localStore = localStorage.getItem('loginUser');\r\n    if (localStore) {\r\n      let loginUser: LoginUser = JSON.parse(localStore);\r\n      if (loginUser.name) {\r\n        return (<Redirect to={'/home'} />)\r\n      }\r\n\r\n    }\r\n  } catch (err) {\r\n    console.log(\"Login\");\r\n    console.log(err);\r\n  }\r\n\r\n  const responseFacebook = (response: any) => {\r\n    console.log(\"responseFacebook\");\r\n    console.log(response);\r\n    if (response.name) {\r\n      let loginUser: LoginUser = {\r\n        name: response.name,\r\n        email: response.email,\r\n        picture: response.picture.data.url,\r\n        id: response.id,\r\n      };\r\n      localStorage.setItem(\"loginUser\", JSON.stringify(loginUser));\r\n      localStorage.setItem(\"loginResponse\", JSON.stringify(response));\r\n      \r\n      notifyLogin(loginUser);\r\n      // setTimeout(() => location.reload(), 1000);\r\n      setTimeout(() => window.location.href = \"/home\", 1000);\r\n    }\r\n    console.log(response);\r\n  };\r\n\r\n  // React.useEffect(() => {\r\n  //   setTimeout(() => window.location.href = \"/\", 2000);\r\n  // }, []);\r\n\r\n\r\n  return (\r\n      <div className=\"center\">\r\n        <img src=\"https://drive.google.com/uc?export=download&id=1mWozRUoSgOtkz8D9oXfh-__yxTFk6N2d\" />\r\n        <div className=\"appName\">\r\n          ỨNG DỤNG ĐIỂM DANH\r\n        </div>\r\n        <FacebookLogin\r\n          appId=\"2598444130186911\"\r\n          // autoLoad={true}\r\n          fields=\"name,email,picture,id\"\r\n          textButton=\"Đăng nhập Baby's Home với Facebook\"\r\n          callback={responseFacebook}\r\n          cssClass=\"fb connect\"\r\n          // redirectUri=\"/home\"\r\n          // isMobile={true}\r\n        />\r\n      </div>\r\n  );\r\n}\r\n\r\nexport default Login;","import React, { FC } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { AppState, Message } from '../reducers/kid';\r\nimport MessageBox from '../components/MessageBox';\r\nimport { bindActionCreators, Dispatch } from 'redux';\r\nimport { notifyLogin } from '../actions/kid';\r\nimport { LoginUser } from '../services/models';\r\nimport Login from '../components/Login';\r\n\r\ninterface StateProps {\r\n    \r\n}\r\n\r\ninterface DispatchProps {\r\n    notifyLogin: (loginUser: LoginUser) => void;\r\n}\r\n\r\ntype EnhancedProps = StateProps &\r\n    DispatchProps;\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => ({\r\n    \r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps =>\r\n    bindActionCreators(\r\n        {\r\n            notifyLogin: (loginUser: LoginUser) =>\r\n                notifyLogin(loginUser),\r\n        },\r\n        dispatch,\r\n    );\r\n\r\nconst MessageContainer: FC<EnhancedProps> = ({\r\n    notifyLogin,\r\n}) => {\r\n\r\n    return (\r\n        <Login notifyLogin={notifyLogin} />\r\n    );\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps,\r\n)(MessageContainer);\r\n","import React, { FC } from 'react';\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogContentText from '@material-ui/core/DialogContentText';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Message } from '../reducers/kid';\r\n\r\nconst companies = ['facebook', 'airbnb', 'netflix'];\r\n\r\nexport interface MessageBoxProps {\r\n    message: Message;\r\n}\r\n\r\nconst MessageBox: FC<MessageBoxProps> = ({message}) => {\r\n    const [open, setOpen] = React.useState(false);\r\n\r\n    React.useEffect(()=> {\r\n        message ? setOpen(true) : setOpen(false)\r\n    }, []);\r\n\r\n    function handleClickOpen() {\r\n        setOpen(true);\r\n    }\r\n\r\n\r\n    function handleClose() {\r\n        setOpen(false);\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            {/* <Button variant=\"outlined\" color=\"primary\" onClick={handleClickOpen}>\r\n                Open alert dialog\r\n            </Button> */}\r\n            <Dialog\r\n                open={open}\r\n                onClose={handleClose}\r\n                aria-labelledby=\"alert-dialog-title\"\r\n                aria-describedby=\"alert-dialog-description\"\r\n                fullWidth={true}\r\n            >\r\n                <DialogTitle id=\"alert-dialog-title\">{message.title}</DialogTitle>\r\n                <DialogContent>\r\n                    <DialogContentText id=\"alert-dialog-description\">\r\n                        {message.content}\r\n                    </DialogContentText>\r\n                </DialogContent>\r\n                <DialogActions>\r\n                    <Button onClick={handleClose} color=\"primary\" autoFocus>\r\n                        Đóng\r\n                    </Button>\r\n                </DialogActions>\r\n            </Dialog>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default MessageBox;\r\n","import React, { FC } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { withRouter } from 'react-router';\r\nimport { AppState, Message } from '../reducers/kid';\r\nimport MessageBox from '../components/MessageBox';\r\n\r\n\r\ninterface StateProps {\r\n    message?: Message;\r\n}\r\n\r\ntype EnhancedProps = StateProps;\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => ({\r\n    message: state.message,\r\n});\r\n\r\nconst MessageContainer: FC<EnhancedProps> = ({\r\n    message,\r\n}) => {\r\n\r\n    return (\r\n        message ? <MessageBox message={message} /> : null\r\n    );\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    null,\r\n)(MessageContainer);\r\n","import Drawer from '@material-ui/core/Drawer';\r\nimport IconButton from '@material-ui/core/IconButton';\r\nimport List from '@material-ui/core/List';\r\nimport ListItem from '@material-ui/core/ListItem';\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\r\nimport ListItemText from '@material-ui/core/ListItemText';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport { Favorite, AssignmentInd } from '@material-ui/icons/';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport React, { FC } from 'react';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { LoginUser } from '../services/models';\r\n\r\nconst useStyles = makeStyles({\r\n  list: {\r\n    width: 250,\r\n  },\r\n  fullList: {\r\n    width: 'auto',\r\n  },\r\n});\r\n\r\ninterface AppDrawerProps {\r\n  classList?: string[];\r\n  loginUser?: LoginUser;\r\n}\r\n\r\nconst AppDrawer: FC<AppDrawerProps> = ({\r\n  classList = [],\r\n  loginUser\r\n}) => {\r\n  console.log(\"AppDrawer\");\r\n  console.log(classList);\r\n  const classes = useStyles();\r\n  const [state, setState] = React.useState({\r\n    top: false,\r\n    left: false,\r\n    bottom: false,\r\n    right: false,\r\n  });\r\n\r\n  type DrawerSide = 'top' | 'left' | 'bottom' | 'right';\r\n  const toggleDrawer = (side: DrawerSide, open: boolean) => (\r\n    event: React.MouseEvent,\r\n  ) => {\r\n    setState({ ...state, [side]: open });\r\n  };\r\n\r\n  const sideList = (side: DrawerSide) => (\r\n    <div\r\n      className={classes.list}\r\n      role=\"presentation\"\r\n      onClick={toggleDrawer(side, false)}\r\n    >\r\n      <List>\r\n        <ListItem button key=\"loginUser\">\r\n          <ListItemIcon>\r\n            <AssignmentInd color=\"secondary\" />\r\n          </ListItemIcon>\r\n          <ListItemText\r\n            primary={loginUser ? loginUser.name : \"\"} />\r\n        </ListItem>\r\n        <Divider />\r\n        {classList.map((item, index) => (\r\n          <>\r\n            <ListItem button key={index} component=\"a\" href={`/#/${item}`}\r\n              onClick={() => setTimeout(() => location.reload(), 1000)}\r\n              style={{ backgroundColor: item, borderStyle: \"solid\", borderColor: \"white\", borderWidth: 2, borderRadius: 5 }}>\r\n              <ListItemIcon>\r\n                <Favorite color=\"secondary\" />\r\n              </ListItemIcon>\r\n              <ListItemText disableTypography\r\n                primary={<Typography style={{ color: '#FFFFFF' }}>\r\n                  {item.toUpperCase()}\r\n                </Typography>} />\r\n            </ListItem>\r\n            <Divider />\r\n          </>\r\n        ))}\r\n      </List>\r\n    </div>\r\n  );\r\n\r\n  return (\r\n    <div>\r\n      <IconButton\r\n        edge=\"start\"\r\n        // className={classes.menuButton}\r\n        color=\"inherit\"\r\n        aria-label=\"open drawer\"\r\n        onClick={toggleDrawer('left', true)}\r\n      >\r\n        <MenuIcon />\r\n      </IconButton>\r\n      <Drawer open={state.left} onClose={toggleDrawer('left', false)}>\r\n        {sideList('left')}\r\n      </Drawer>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default AppDrawer;","import React, { FC, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators, Dispatch } from 'redux';\r\nimport { getClassList } from '../actions/kid';\r\nimport AppDrawer from '../components/AppDrawer';\r\nimport { AppState } from '../reducers/kid';\r\nimport { LoginUser } from '../services/models';\r\n\r\n\r\ninterface StateProps {\r\n    classList?: string[];\r\n    loginUser?: LoginUser;\r\n}\r\n\r\ninterface DispatchProps {\r\n    getClassListStart: () => void;\r\n}\r\n\r\ntype EnhancedProps = StateProps &\r\n    DispatchProps;\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => ({\r\n    classList: state.classList,\r\n    loginUser: localStorage.getItem(\"loginUser\") ? JSON.parse(localStorage.getItem(\"loginUser\") as string) as LoginUser : undefined,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps =>\r\n    bindActionCreators(\r\n        {\r\n            getClassListStart: () =>\r\n                getClassList.start(),\r\n        },\r\n        dispatch,\r\n    );\r\n\r\nconst AppDrawerContainer: FC<EnhancedProps> = ({\r\n    classList,\r\n    loginUser,\r\n    getClassListStart\r\n}) => {\r\n\r\n    useEffect(() => {\r\n        setTimeout(() => getClassListStart(), 1000);\r\n    }, []);\r\n\r\n    return (\r\n        <AppDrawer classList={classList} loginUser={loginUser} />\r\n    );\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps,\r\n)(AppDrawerContainer);\r\n","import AppBar from \"@material-ui/core/AppBar\";\r\nimport Container from '@material-ui/core/Container';\r\nimport GridList from \"@material-ui/core/GridList\";\r\nimport GridListTile from \"@material-ui/core/GridListTile\";\r\nimport GridListTileBar from \"@material-ui/core/GridListTileBar\";\r\nimport IconButton from \"@material-ui/core/IconButton\";\r\nimport InputBase from '@material-ui/core/InputBase';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport LinearProgress from '@material-ui/core/LinearProgress';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport Select from '@material-ui/core/Select';\r\nimport { createStyles, fade, makeStyles, Theme, useTheme } from \"@material-ui/core/styles\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport CheckCircle from \"@material-ui/icons/CheckCircle\";\r\nimport FiberManualRecord from '@material-ui/icons/FiberManualRecord';\r\nimport MoreIcon from '@material-ui/icons/MoreVert';\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport * as React from \"react\";\r\nimport { FC } from \"react\";\r\nimport * as MessageType from '../actions/messageConstants';\r\nimport * as AppConstants from '../appConstants';\r\nimport { Kid } from \"../services/models\";\r\nimport Box from '@material-ui/core/Box';\r\nimport MessageBox from '../containers/MessageBox';\r\nimport { Message } from '../reducers/kid';\r\nimport AppDrawer from '../containers/AppDrawer';\r\nimport { LoginUser } from '../services/models';\r\nimport { Redirect } from 'react-router-dom';\r\n\r\nexport interface KidsProps {\r\n  left?: boolean;\r\n  kidList?: Kid[];\r\n  selectKid?: (id: string) => void;\r\n  isLoading: boolean;\r\n  getKidListStart: (sheetName: string) => void;\r\n  sendMessages?: (kidList: Kid[], messageType: string) => void;\r\n  filterKid?: (filterVal: string) => void;\r\n  filterVal?: string;\r\n  selectAll?: (selectAll: Kid[]) => void;\r\n  unselectAll?: (selectAll: Kid[]) => void;\r\n  search?: (keyword: string) => void;\r\n  searchVal?: string;\r\n  message?: Message;\r\n  classList?: string[];\r\n  notifyLogin?: (loginUser: LoginUser) => void;\r\n}\r\n\r\nconst Kids: FC<KidsProps> = ({\r\n  left = false,\r\n  kidList = [],\r\n  selectKid = () => { },\r\n  isLoading = false,\r\n  getKidListStart = () => { },\r\n  sendMessages = () => { },\r\n  filterKid = () => { },\r\n  filterVal = \"\",\r\n  selectAll = () => { },\r\n  unselectAll = () => { },\r\n  search = () => { },\r\n  searchVal,\r\n  message,\r\n  classList = [],\r\n  notifyLogin = () => {},\r\n}) => {\r\n\r\n  try {\r\n\r\n    let localStore = localStorage.getItem('loginUser');\r\n    if (!localStore) {\r\n      return (<Redirect to={'/'} />)\r\n    } else {\r\n      let loginUser: LoginUser = JSON.parse(localStore);\r\n      if (!loginUser.name) {\r\n        return (<Redirect to={'/'} />)\r\n      }\r\n    }\r\n  } catch (err) {\r\n    console.log(\"Login\");\r\n    console.log(err);\r\n  }\r\n\r\n  const useStyles = makeStyles((theme: Theme) =>\r\n    createStyles({\r\n      root: {\r\n        display: \"flex\",\r\n        flexWrap: \"wrap\",\r\n        justifyContent: \"space-around\",\r\n        overflow: \"hidden\",\r\n        // backgroundColor: theme.palette.background.paper\r\n      },\r\n      gridListTile: {\r\n        // width: 177,\r\n        // height: 180,\r\n        justify: \"center\",\r\n        alignItems: \"center\"\r\n      },\r\n      icon: {\r\n        color: \"rgba(255, 255, 255, 0.54)\"\r\n      },\r\n      button: {\r\n        margin: theme.spacing(1),\r\n        width: 80\r\n      },\r\n      rightIcon: {\r\n        marginLeft: theme.spacing(1)\r\n      },\r\n      title: {\r\n        flexGrow: 1\r\n      },\r\n      menuButton: {\r\n        marginRight: theme.spacing(2)\r\n      },\r\n      list: {\r\n        width: 250\r\n      },\r\n      redIcon: {\r\n        color: \"red\"\r\n      },\r\n      greenIcon: {\r\n        color: \"green\"\r\n      },\r\n      yellowIcon: {\r\n        color: \"yellow\"\r\n      },\r\n      greyIcon: {\r\n        color: \"grey\"\r\n      },\r\n      marginIcon: {\r\n        margin: 10\r\n      },\r\n      progress: {\r\n        margin: theme.spacing(2),\r\n      },\r\n      fab: {\r\n        margin: theme.spacing(1),\r\n        // right: 20,\r\n        // position: 'fixed'\r\n      },\r\n      extendedIcon: {\r\n        marginRight: theme.spacing(1),\r\n      },\r\n      formControl: {\r\n        margin: theme.spacing(1),\r\n        minWidth: 120,\r\n      },\r\n      selectEmpty: {\r\n        marginTop: theme.spacing(2),\r\n      },\r\n      search: {\r\n        position: 'relative',\r\n        borderRadius: theme.shape.borderRadius,\r\n        backgroundColor: fade(theme.palette.common.white, 0.15),\r\n        '&:hover': {\r\n          backgroundColor: fade(theme.palette.common.white, 0.25),\r\n        },\r\n        marginRight: theme.spacing(2),\r\n        marginLeft: 0,\r\n        width: '100%',\r\n        [theme.breakpoints.up('sm')]: {\r\n          marginLeft: theme.spacing(3),\r\n          width: 'auto',\r\n        },\r\n      },\r\n      searchIcon: {\r\n        width: theme.spacing(7),\r\n        height: '100%',\r\n        position: 'absolute',\r\n        pointerEvents: 'none',\r\n        display: 'flex',\r\n        alignItems: 'center',\r\n        justifyContent: 'center',\r\n      },\r\n      inputRoot: {\r\n        color: 'inherit',\r\n      },\r\n      inputInput: {\r\n        padding: theme.spacing(1, 1, 1, 7),\r\n        fontSize: 16,\r\n        transition: theme.transitions.create('width'),\r\n        width: '100%',\r\n        [theme.breakpoints.up('md')]: {\r\n          width: 200,\r\n        },\r\n      },\r\n      toolbar: theme.mixins.toolbar,\r\n      grow: {\r\n        flexGrow: 1,\r\n      },\r\n      gridListTileSelected: {\r\n        // width: 177,\r\n        // height: 180,\r\n        justify: \"center\",\r\n        alignItems: \"center\",\r\n        borderStyle: \"solid\",\r\n        borderWidth: 10,\r\n        borderColor: \"#d4d4d5\",\r\n      }\r\n    })\r\n  );\r\n  // if(!localStorage.getItem('userData')){\r\n  //   return (<Redirect to={'/'}/>)\r\n  // }\r\n\r\n  console.log(kidList);\r\n\r\n  const classes = useStyles();\r\n\r\n  var tileWidthPerc = \"50%\";\r\n\r\n  const getGridListCols = () => {\r\n    const theme = useTheme();\r\n    // console.log(props.width);\r\n    var numTiles = 2;\r\n    if (useMediaQuery(theme.breakpoints.up('xl'))) {\r\n      numTiles = 6;\r\n      tileWidthPerc = \"17%\";\r\n    }\r\n\r\n    if (useMediaQuery(theme.breakpoints.up('lg'))) {\r\n      numTiles = 5;\r\n      tileWidthPerc = \"20%\";\r\n    }\r\n\r\n    if (useMediaQuery(theme.breakpoints.up('md'))) {\r\n      numTiles = 4;\r\n      tileWidthPerc = \"25%\";\r\n    }\r\n\r\n    if (useMediaQuery(theme.breakpoints.up('sm'))) {\r\n      numTiles = 3;\r\n      tileWidthPerc = \"33%\";\r\n    }\r\n\r\n    return numTiles;\r\n  };\r\n\r\n  console.log(getGridListCols());\r\n  const gridListTileStyle = {\r\n    width: tileWidthPerc,\r\n    height: 180\r\n  };\r\n\r\n  const filterKids = kidList.filter(item => {\r\n    let searchFound = false;\r\n\r\n    if (searchVal) {\r\n      console.log(\"search \" + searchVal);\r\n      if (khongDau(item.name.toLowerCase()).includes(khongDau(searchVal.toLowerCase()))) {\r\n        searchFound = true;\r\n      }\r\n    }\r\n    else {\r\n      searchFound = true;\r\n    }\r\n\r\n    let filterFound = false;\r\n    if (filterVal === AppConstants.FILTER_ALL) {\r\n      filterFound = true;\r\n    } else if (filterVal === AppConstants.FILTER_GOSCHOOL) {\r\n      if (item.status === AppConstants.STATUS_GO_SCHOOL ||\r\n        item.status === AppConstants.STATUS_LEAVE_SCHOOL) {\r\n        filterFound = true;\r\n      }\r\n    } else if (filterVal === AppConstants.FILTER_ABSENT) {\r\n      if (item.status === AppConstants.STATUS_ABSENT ||\r\n        item.status === AppConstants.STATUS_ABSENT_ALLOW) {\r\n        filterFound = true;\r\n      }\r\n    } else if (filterVal === AppConstants.FILTER_UNKNOWN) {\r\n      if (!item.status) {\r\n        filterFound = true;\r\n      }\r\n    }\r\n\r\n    return searchFound && filterFound;\r\n  });\r\n\r\n  // Disable functions if there is no kids selected\r\n  const isDisabled: boolean = filterKids.filter(item => item.isSelected).length === 0;\r\n\r\n  function khongDau(inputStr: string) {\r\n    var str = inputStr;\r\n    str = str.toLowerCase();\r\n    str = str.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g, \"a\");\r\n    str = str.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g, \"e\");\r\n    str = str.replace(/ì|í|ị|ỉ|ĩ/g, \"i\");\r\n    str = str.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g, \"o\");\r\n    str = str.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g, \"u\");\r\n    str = str.replace(/ỳ|ý|ỵ|ỷ|ỹ/g, \"y\");\r\n    str = str.replace(/đ/g, \"d\");\r\n    str = str.replace(/!|@|%|\\^|\\*|\\(|\\)|\\+|\\=|\\<|\\>|\\?|\\/|,|\\.|\\:|\\;|\\'|\\\"|\\&|\\#|\\[|\\]|~|\\$|_|`|-|{|}|\\||\\\\/g, \" \");\r\n    str = str.replace(/ + /g, \" \");\r\n    str = str.trim();\r\n    return str;\r\n  }\r\n\r\n  function handleFilter(event: React.ChangeEvent<{ name?: string; value: unknown }>) {\r\n    var filterVal: string = event.target.value as string;\r\n    console.log(event.target.value);\r\n    filterKid(filterVal);\r\n  }\r\n\r\n  const [anchorEl, setAnchorEl] = React.useState<null | HTMLElement>(null);\r\n\r\n  function handleMenuClick(event: React.MouseEvent<HTMLButtonElement>) {\r\n    setAnchorEl(event.currentTarget);\r\n  }\r\n\r\n  function handleMenuClose(messageType: string) {\r\n    setAnchorEl(null);\r\n    console.log(messageType);\r\n    if (messageType) {\r\n      sendMessages(kidList, messageType)\r\n    }\r\n\r\n  }\r\n\r\n  function handleSelectAll() {\r\n    setAnchorEl(null);\r\n    selectAll(filterKids);\r\n  }\r\n\r\n  function handleUnselectAll() {\r\n    setAnchorEl(null);\r\n    unselectAll(filterKids);\r\n  }\r\n\r\n  function handleSearch(event: React.ChangeEvent<HTMLTextAreaElement | HTMLInputElement>) {\r\n    search(event.target.value);\r\n  }\r\n\r\n  const handleSendNotification = () => {\r\n    setAnchorEl(null);\r\n    try {\r\n\r\n      let localStore = localStorage.getItem('loginUser');\r\n\r\n      if (!localStore) {\r\n        return (<Redirect to={'/'} />)\r\n      } else {\r\n        let loginUser: LoginUser = JSON.parse(localStore);\r\n        if (!loginUser.name) {\r\n          return (<Redirect to={'/'} />)\r\n        }\r\n\r\n        notifyLogin(loginUser);\r\n      }\r\n    } catch (err) {\r\n      console.log(\"Login\");\r\n      console.log(err);\r\n    }\r\n  }\r\n\r\n  console.log(\"Login response\");\r\n  console.log(localStorage.getItem(\"loginResponse\"));\r\n\r\n  return (\r\n    <div className={classes.root} >\r\n\r\n      <Container>\r\n        <AppBar position=\"fixed\" color=\"secondary\" >\r\n          <Toolbar>\r\n            <AppDrawer />\r\n            <div className={classes.search}>\r\n              <div className={classes.searchIcon}>\r\n                <SearchIcon />\r\n              </div>\r\n              <InputBase\r\n                placeholder=\"Tìm kiếm…\"\r\n                onChange={handleSearch}\r\n                classes={{\r\n                  root: classes.inputRoot,\r\n                  input: classes.inputInput,\r\n                }}\r\n                inputProps={{ 'aria-label': 'search' }}\r\n              />\r\n            </div>\r\n\r\n            <div className={classes.grow} />\r\n\r\n            <IconButton edge=\"end\" color=\"inherit\" onClick={handleMenuClick}>\r\n              <MoreIcon />\r\n            </IconButton>\r\n            <Menu\r\n              id=\"simple-menu\"\r\n              anchorEl={anchorEl}\r\n              keepMounted\r\n              open={Boolean(anchorEl)}\r\n              onClose={() => handleMenuClose(\"\")}\r\n            >\r\n              <MenuItem onClick={handleSelectAll}>Chọn tất cả</MenuItem>\r\n              <MenuItem onClick={handleUnselectAll}>Bỏ chọn tất cả</MenuItem>\r\n              <MenuItem disabled={isDisabled} onClick={() => handleMenuClose(MessageType.MESSAGE_GO_SCHOOL)}>Đi học</MenuItem>\r\n              <MenuItem disabled={isDisabled} onClick={() => handleMenuClose(MessageType.MESSAGE_LEAVE_SCHOOL)}>Đã về</MenuItem>\r\n              <MenuItem disabled={isDisabled} onClick={() => handleMenuClose(MessageType.MESSAGE_ABSENT_ALLOW)}>Nghỉ có phép</MenuItem>\r\n              <MenuItem disabled={isDisabled} onClick={() => handleMenuClose(MessageType.MESSAGE_ABSENT)}>Nghỉ không phép</MenuItem>\r\n              {/* <MenuItem onClick={() => handleSendNotification()}>Thông báo</MenuItem> */}\r\n            </Menu>\r\n\r\n          </Toolbar>\r\n        </AppBar>\r\n      </Container>\r\n\r\n\r\n      <Container className={classes.toolbar}></Container>\r\n\r\n      <Container style={{ paddingLeft: 0, paddingRight: 0, marginTop: -5 }}>\r\n        {\r\n          isLoading ? <LinearProgress /> : <div style={{ height: 4 }}> </div>\r\n        }\r\n\r\n      </Container>\r\n\r\n      <Container>\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <Box flexGrow={1}>\r\n            <Select\r\n              value={filterVal}\r\n              onChange={handleFilter}\r\n              className={classes.formControl}\r\n            >\r\n              <MenuItem value={AppConstants.FILTER_ALL}>Tất cả</MenuItem>\r\n              <MenuItem value={AppConstants.FILTER_GOSCHOOL}>Đi học</MenuItem>\r\n              <MenuItem value={AppConstants.FILTER_ABSENT}>Nghỉ học</MenuItem>\r\n              <MenuItem value={AppConstants.FILTER_UNKNOWN}>Chưa thông báo</MenuItem>\r\n            </Select>\r\n          </Box>\r\n          <Box>\r\n            <InputLabel>Số bé: {filterKids.length}</InputLabel>\r\n          </Box>\r\n        </Box>\r\n      </Container>\r\n\r\n      <Container>\r\n        <GridList\r\n          cols={getGridListCols()}\r\n          style={{ marginTop: 16 }}\r\n        >\r\n          {filterKids.map(item => (\r\n            <GridListTile\r\n              className={item.isSelected ? classes.gridListTileSelected : classes.gridListTile}\r\n              style={gridListTileStyle}\r\n              key={item.id}\r\n              onClick={() => selectKid(item.id)}\r\n\r\n            >\r\n              <img src={item.avatar} alt={item.name} />\r\n              <GridListTileBar\r\n                title={item.name}\r\n                actionIcon={\r\n                  item.isSelected ? (\r\n                    <CheckCircle className={classes.greenIcon} />\r\n                  ) : (item.status == AppConstants.STATUS_GO_SCHOOL ? <FiberManualRecord className={classes.greenIcon} /> :\r\n                    (item.status == AppConstants.STATUS_LEAVE_SCHOOL ? <FiberManualRecord className={classes.greyIcon} /> :\r\n                      (item.status == AppConstants.STATUS_ABSENT_ALLOW ? <FiberManualRecord className={classes.yellowIcon} /> :\r\n                        (item.status == AppConstants.STATUS_ABSENT ? <FiberManualRecord className={classes.redIcon} /> : \"\"))))\r\n                }\r\n              />\r\n            </GridListTile>\r\n          ))}\r\n        </GridList>\r\n        <MessageBox />\r\n\r\n      </Container>\r\n\r\n      {/* <Fab color=\"secondary\" aria-label=\"edit\" className={classes.fab} style={fabStyle}>\r\n        <SendIcon />\r\n      </Fab> */}\r\n    </div>\r\n  );\r\n};\r\n\r\n// export default withWidth()(Kids);\r\nexport default Kids;\r\n\r\n","export const FILTER_ALL = \"FILTER_ALL\";\r\nexport const FILTER_GOSCHOOL = \"FILTER_GOSCHOOL\";\r\nexport const FILTER_ABSENT = \"FILTER_ABSENT\";\r\nexport const FILTER_UNKNOWN = \"FILTER_UNKNOWN\";\r\n\r\nexport const STATUS_GO_SCHOOL = \"Đi học\";\r\nexport const STATUS_LEAVE_SCHOOL = \"Đã về\";\r\nexport const STATUS_ABSENT_ALLOW = \"Nghỉ có phép\";\r\nexport const STATUS_ABSENT = \"Nghỉ không phép\";","export const MESSAGE_GO_SCHOOL = \"Đi học\";\r\nexport const MESSAGE_LEAVE_SCHOOL = \"Đã về\";\r\nexport const MESSAGE_ABSENT_ALLOW = \"Nghỉ có phép\";\r\nexport const MESSAGE_ABSENT = \"Nghỉ không phép\";\r\n\r\n// export enum MessageType {\r\n//     GO_SCHOOL = \"Đi học\",\r\n//     LEAVE_SCHOOL = \"Đã về\",\r\n//     ABSENT_ALLOW = \"Nghỉ có phép\",\r\n//     ABSENT = \"Nghỉ không phép\",\r\n// }","import React, { FC, useEffect } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { bindActionCreators, Dispatch } from 'redux';\r\nimport { RouteComponentProps, withRouter } from 'react-router';\r\nimport { Kid, LoginUser } from '../services/models';\r\nimport { AppState } from '../reducers/kid';\r\nimport { getKidList, selectKid, sendMessages, filterKid, selectAll, unselectAll, search, notifyLogin } from '../actions/kid';\r\nimport Kids, { KidsProps } from '../components/Kids';\r\n\r\ninterface StateProps {\r\n  kidList: Kid[];\r\n  isLoading: boolean;\r\n  filterVal?: string;\r\n  searchVal?: string;\r\n  classList?: string[];\r\n}\r\n\r\ninterface DispatchProps {\r\n  getKidListStart: (className: string) => void;\r\n  selectKid: (id: string) => void;\r\n  sendMessages: (kidList: Kid[], messageType: string) => void;\r\n  filterKid: (filterVal: string) => void;\r\n  selectAll: (kidList: Kid[]) => void;\r\n  unselectAll: (kidList: Kid[]) => void;\r\n  search: (keyword: string) => void;\r\n  notifyLogin: (loginUser: LoginUser) => void;\r\n}\r\n\r\ntype EnhancedKidsProps = KidsProps & \r\n  StateProps &\r\n  DispatchProps &\r\n  RouteComponentProps<{ kidClass: string }>;\r\n\r\nconst mapStateToProps = (state: AppState): StateProps => ({\r\n  kidList: state.kids,\r\n  filterVal: state.filterVal,\r\n  searchVal: state.searchVal,\r\n  isLoading: state.isLoading,\r\n  classList: state.classList,\r\n});\r\n\r\nconst mapDispatchToProps = (dispatch: Dispatch): DispatchProps =>\r\n  bindActionCreators(\r\n    {\r\n      getKidListStart: (kidClass: string) =>\r\n        getKidList.start(kidClass),\r\n\r\n      selectKid: (id: string) =>\r\n        selectKid(id),\r\n\r\n      sendMessages: (kidList: Kid[], messageType: string) =>\r\n        sendMessages.start(kidList, messageType),\r\n\r\n      filterKid: (filterVal: string) =>\r\n        filterKid(filterVal),\r\n\r\n      selectAll: (kidList: Kid[]) =>\r\n        selectAll(kidList),\r\n\r\n      unselectAll: (kidList: Kid[]) =>\r\n        unselectAll(kidList),\r\n\r\n      search: (keyword: string) =>\r\n        search(keyword),\r\n\r\n      notifyLogin: (loginUser: LoginUser) => \r\n        notifyLogin(loginUser),\r\n    },\r\n    dispatch,\r\n  );\r\n\r\nconst KidsContainer: FC<EnhancedKidsProps> = ({\r\n  kidList,\r\n  isLoading,\r\n  getKidListStart,\r\n  selectKid,\r\n  sendMessages,\r\n  filterKid,\r\n  filterVal,\r\n  selectAll,\r\n  unselectAll,\r\n  search,\r\n  searchVal,\r\n  match,\r\n  notifyLogin,\r\n}) => {\r\n  const { kidClass } = match.params;\r\n\r\n  useEffect(() => {\r\n    localStorage.setItem(\"class\", kidClass);\r\n    console.log(\"KidsContainer \" + kidClass);\r\n    setTimeout(() => getKidListStart(kidClass), 1000);\r\n    // getMembersStart(kidClass);\r\n    // sendMessages(kidList, \"\");\r\n  }, []);\r\n\r\n  return (\r\n    <Kids kidList={kidList} \r\n      isLoading={isLoading} \r\n      getKidListStart={getKidListStart} \r\n      selectKid={selectKid}\r\n      filterKid={filterKid}\r\n      sendMessages={sendMessages}\r\n      filterVal={filterVal}\r\n      selectAll={selectAll}\r\n      unselectAll={unselectAll}\r\n      search={search}\r\n      searchVal={searchVal}\r\n      notifyLogin={notifyLogin} />\r\n  );\r\n};\r\n\r\nexport default withRouter(\r\n  connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps,\r\n  )(KidsContainer),\r\n);\r\n","import React, { FC } from 'react';\nimport { Helmet } from 'react-helmet';\nimport { Redirect, Route, Switch } from 'react-router';\nimport './App.css';\nimport Home from './components/Home';\nimport Login from './containers/Login';\nimport MessageBox from './components/MessageBox';\nimport Kids from './containers/Kids';\n\n\n\nconst title = 'ĐIỂM DANH - BABY\\'S HOME';\n\nconst App: FC = () => (\n  <>\n    <Helmet>\n      <title>{title}</title>\n    </Helmet>\n\n    {/* <header className=\"App-header\">\n      <h1>{title}</h1>\n    </header> */}\n    <Switch>\n      <Route path=\"/\" exact component={Login} />\n      <Route path=\"/home\" exact component={Home} />\n      <Route path=\"/MessageBox\" component={MessageBox} />\n      <Route path=\"/:kidClass\" component={Kids} />\n      <Redirect to=\"/\" />\n    </Switch>\n  </>\n);\n\nexport default App;\n","import { Reducer } from 'redux';\r\nimport { AxiosError } from 'axios';\r\n\r\nimport { Action } from '../actions/kid';\r\nimport * as ActionType from '../actions/actionConstants';\r\nimport { Kid } from \"../services/models\";\r\nimport * as AppConstants from '../appConstants';\r\n\r\nexport interface Message {\r\n  title: string;\r\n  content: string;\r\n}\r\n\r\nexport interface AppState {\r\n  kids: Kid[];\r\n  classList: string[];\r\n  filterVal?: string;\r\n  searchVal?: string;\r\n  isLoading: boolean;\r\n  error?: AxiosError;\r\n  message?: Message;\r\n}\r\n\r\nexport const initialState: AppState = {\r\n  kids: [],\r\n  classList: [],\r\n  filterVal: AppConstants.FILTER_ALL,\r\n  isLoading: false,\r\n};\r\n\r\nconst kidReducer: Reducer<AppState, Action> = (\r\n  state: AppState = initialState,\r\n  action: Action,\r\n): AppState => {\r\n  switch (action.type) {\r\n    case ActionType.GETKIDLIST_START:\r\n      return {\r\n        ...state,\r\n        kids: [],\r\n        isLoading: true,\r\n      };\r\n    case ActionType.GETKIDLIST_SUCCESS:\r\n      return {\r\n        ...state,\r\n        kids: [...action.payload],\r\n        isLoading: false,\r\n      };\r\n    case ActionType.GETKIDLIST_FAILURE:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        // message: {\r\n        //   title: \"LỖI\",\r\n        //   content: \"Đã có lỗi xảy ra\"\r\n        // },\r\n        error: action.payload,\r\n      };\r\n\r\n    case ActionType.GETCLASSLIST_START:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n    case ActionType.GETCLASSLIST_SUCCESS:\r\n      return {\r\n        ...state,\r\n        classList: [...action.payload],\r\n        isLoading: false,\r\n      };\r\n    case ActionType.GETCLASSLIST_FAILURE:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        // message: {\r\n        //   title: \"LỖI\",\r\n        //   content: \"Đã có lỗi xảy ra\"\r\n        // },\r\n        error: action.payload,\r\n      };\r\n\r\n    case ActionType.SEND_MESSAGES_START:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n    case ActionType.SEND_MESSAGES_SUCCESS:\r\n      return {\r\n        ...state,\r\n        // message: {\r\n        //   title: \"THÀNH CÔNG\",\r\n        //   content: \"Đã gửi thành công\"\r\n        // },\r\n        isLoading: false,\r\n      };\r\n    case ActionType.SEND_MESSAGES_FAILURE:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        // message: {\r\n        //   title: \"LỖI\",\r\n        //   content: \"Đã có lỗi xảy ra khi gửi\"\r\n        // },\r\n        error: action.payload,\r\n      };\r\n\r\n    case ActionType.UPDATE_AIRTABLE_START:\r\n      return {\r\n        ...state,\r\n        isLoading: true,\r\n      };\r\n    case ActionType.UPDATE_AIRTABLE_SUCCESS:\r\n      return {\r\n        ...state,\r\n        kids: state.kids.map(item => {\r\n          let kidList = state.kids;\r\n          for (let i = 0; i < kidList.length; i++) {\r\n            if (kidList[i].isSelected) {\r\n              item.isSelected = false;\r\n            }\r\n          }\r\n\r\n          return item;\r\n        }),\r\n        // kids: state.kids.map(item => {\r\n        //   if (action.payload.id === item.id) {\r\n        //     item.status = action.payload.status;\r\n        //     item.isSelected = false;\r\n        //   }\r\n        //   return item;\r\n        // }),\r\n        // filterKids: [...state.kids],\r\n        isLoading: false,\r\n      };\r\n    case ActionType.UPDATE_AIRTABLE_FAILURE:\r\n      return {\r\n        ...state,\r\n        isLoading: false,\r\n        // message: {\r\n        //   title: \"LỖI\",\r\n        //   content: \"Đã có lỗi xảy ra\"\r\n        // },\r\n        error: action.payload,\r\n      };\r\n\r\n    case ActionType.SELECT_KID:\r\n      return {\r\n        ...state,\r\n        kids: state.kids.map(item => {\r\n          if (item.id === action.payload) {\r\n            item.isSelected = !item.isSelected;\r\n          }\r\n          return item;\r\n        })\r\n      };\r\n\r\n    case ActionType.SELECT_ALL:\r\n      return {\r\n        ...state,\r\n        kids: state.kids.map(item => {\r\n          let kidList = action.payload;\r\n          for (let i = 0; i < kidList.length; i++) {\r\n            if (item.id === kidList[i].id) {\r\n              item.isSelected = true;\r\n            }\r\n          }\r\n\r\n          return item;\r\n        })\r\n      };\r\n\r\n    case ActionType.UNSELECT_ALL:\r\n      return {\r\n        ...state,\r\n        kids: state.kids.map(item => {\r\n          let kidList = action.payload;\r\n          for (let i = 0; i < kidList.length; i++) {\r\n            if (item.id === kidList[i].id) {\r\n              item.isSelected = false;\r\n            }\r\n          }\r\n\r\n          return item;\r\n        })\r\n      };\r\n\r\n\r\n    case ActionType.SEARCH:\r\n      return {\r\n        ...state,\r\n        searchVal: action.payload\r\n      };\r\n\r\n    case ActionType.FILTER_KID:\r\n      return {\r\n        ...state,\r\n        filterVal: action.payload,\r\n        kids: state.kids.map(item => {\r\n          if (item.isSelected) {\r\n            item.isSelected = false\r\n          }\r\n\r\n          return item;\r\n        })\r\n        // filterKids: state.kids.filter(item => {\r\n        //   item.isSelected = false;\r\n\r\n        //   if (action.payload === AppConstants.FILTER_ALL) {\r\n        //     return true;\r\n        //   }\r\n\r\n        //   if (item.status) {\r\n        //     switch (action.payload) {\r\n        //       case AppConstants.FILTER_GOSCHOOL:\r\n        //         if (item.status === AppConstants.STATUS_GO_SCHOOL ||\r\n        //           item.status === AppConstants.STATUS_LEAVE_SCHOOL) {\r\n        //           return true;\r\n        //         }\r\n        //       case AppConstants.FILTER_ABSENT:\r\n        //         if (item.status === AppConstants.STATUS_ABSENT ||\r\n        //           item.status === AppConstants.STATUS_ABSENT_ALLOW) {\r\n        //           return true;\r\n        //         }\r\n        //       default:\r\n        //         return false;\r\n        //     }\r\n        //   }\r\n\r\n        //   if (action.payload === AppConstants.FILTER_UNKNOWN) {\r\n        //     return true;\r\n        //   }\r\n        //   else {\r\n        //     return false;\r\n        //   }\r\n        // })\r\n      };\r\n\r\n    default: {\r\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\r\n      // const _: never = action;\r\n\r\n      return state;\r\n    }\r\n  }\r\n};\r\n\r\nexport default kidReducer;\r\n","import axios from 'axios';\r\nimport { Kid, LoginUser } from './models';\r\nimport * as MessageType from '../actions/messageConstants';\r\n\r\ninterface ApiConfig {\r\n  baseURL: string;\r\n  timeout: number;\r\n}\r\n\r\nconst AIRTABLE_BASE_KEY = \"app8JrpvvNCWIOQAN\";\r\nconst AIRTABLE_API_KEY = \"keyfPK5EI1cgILohx\";\r\nconst AIRTABLE_API_CONFIG: ApiConfig = {\r\n  baseURL: 'https://api.airtable.com/v0',\r\n  timeout: 7000,\r\n};\r\n\r\nexport const getKidListFactory = (optionConfig?: ApiConfig) => {\r\n  const config = {\r\n    ...AIRTABLE_API_CONFIG,\r\n    ...optionConfig,\r\n  };\r\n  const instance = axios.create(config);\r\n\r\n  const getKidList = async (kidClass: string) => {\r\n    try {\r\n      console.log(\"getKidList\");\r\n      const requestUrl = `/${AIRTABLE_BASE_KEY}/${kidClass}?api_key=${AIRTABLE_API_KEY}&view=Kids`;\r\n      const response = await instance.get(requestUrl);\r\n\r\n      if (response.status !== 200) {\r\n        throw new Error('Server Error');\r\n      }\r\n\r\n      let currentDay = new Date().getDate();\r\n\r\n      console.log(response.data);\r\n      const kidList: Kid[] = response.data.records.map((item: any) => {\r\n        const val = item.fields;\r\n        var kid: Kid = {\r\n          id: val.Id,\r\n          name: val.Name,\r\n          contactIds: val.hasOwnProperty(\"ContactIds\") ? val.ContactIds.split(\";\") : [],\r\n          avatar: val.hasOwnProperty(\"Avatar\") ? val.Avatar : \"\",\r\n          status: val.hasOwnProperty(currentDay) ? val[currentDay] : \"\",\r\n          sendLog: val.hasOwnProperty(\"SendLog\") ? val.SendLog : \"\",\r\n          recordId: item.id,\r\n          class: kidClass,\r\n        };\r\n\r\n        return kid;\r\n      });\r\n\r\n      console.log(\"GetKidList\");\r\n      console.log(kidList);\r\n\r\n      // remove first item and return\r\n      return kidList;\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  return getKidList;\r\n};\r\n\r\nexport const getClassListFactory = (optionConfig?: ApiConfig) => {\r\n  const config = {\r\n    ...AIRTABLE_API_CONFIG,\r\n    ...optionConfig,\r\n  };\r\n  const instance = axios.create(config);\r\n\r\n  const getClassList = async () => {\r\n    try {\r\n      console.log(\"getKidList\");\r\n      const requestUrl = `/${AIRTABLE_BASE_KEY}/Class?api_key=${AIRTABLE_API_KEY}&view=Classes`;\r\n      console.log(requestUrl);\r\n      const response = await instance.get(requestUrl);\r\n\r\n      if (response.status !== 200) {\r\n        throw new Error('Server Error');\r\n      }\r\n\r\n      console.log(response);\r\n\r\n      const classList: string[] = response.data.records.map((item: any) => item.fields.ClassName);\r\n      \r\n      // remove first item and return\r\n      return classList;\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  return getClassList;\r\n};\r\n\r\nexport const updateAirTableFactory = (optionConfig?: ApiConfig) => {\r\n  const config = {\r\n    ...AIRTABLE_API_CONFIG,\r\n    ...optionConfig,\r\n  };\r\n  const instance = axios.create(config);\r\n\r\n  const updateAirTable = async (kidList: Kid[]) => {\r\n    for (let i = 0; i < kidList.length; i++) {\r\n      if (kidList[i].isSelected) {\r\n        try {\r\n          console.log(\"updateAirTable\");\r\n          const requestUrl = `/${AIRTABLE_BASE_KEY}/${kidList[i].class}/${kidList[i].recordId}/?api_key=${AIRTABLE_API_KEY}`;\r\n          let currentDay = new Date().getDate();\r\n\r\n          let currentDate = new Date();\r\n          let loginUserName = (JSON.parse(localStorage.getItem(\"loginUser\") as string) as LoginUser).name;\r\n          let sendLog = kidList[i].sendLog + \";\" + currentDate.toLocaleString(\"ja-JP\") \r\n                        + \" \" + loginUserName;\r\n          console.log(sendLog);\r\n          const requestBody = {\r\n            fields: {\r\n              currentDay: kidList[i].status,\r\n              \"SendLog\": sendLog,\r\n            }\r\n          };\r\n          console.log(requestUrl);\r\n          const jsonStr = JSON.stringify(requestBody).replace(\"currentDay\", currentDay.toString());\r\n          console.log(JSON.stringify(requestBody).replace(\"currentDay\", currentDay.toString()));\r\n          const response = await instance.patch(requestUrl, JSON.parse(jsonStr));\r\n          console.log(response);\r\n\r\n        } catch (err) {\r\n          console.log(err);\r\n        }\r\n      }\r\n\r\n    }\r\n  };\r\n\r\n  return updateAirTable;\r\n};\r\n\r\nconst CHATFULE_BOT_ID = \"5d5c2aaffdaf79000144292a\";\r\nconst CHATFUEL_TOKEN = \"mELtlMAHYqR0BvgEiMq8zVek3uYUK3OJMbtyrdNPTrQB9ndV0fM7lWTFZbM4MZvD\";\r\nconst CHATFUEL_MESSENGER = \"Messenger\";\r\nconst CHATFUEL_ZALO = \"Zalo\";\r\nconst CHATFUEL_BLOCK_DIHOC = \"_DiHoc\";\r\nconst CHATFUEL_BLOCK_NGHIHOC_COPHEP = \"_NghiHoc_CoPhep\";\r\nconst CHATFUEL_BLOCK_NGHIHOC = \"_NghiHoc\";\r\nconst CHATFUEL_BLOCK_VENHA = \"_VeNha\";\r\nconst CHATFUEL_BLOCK_NOTIFYLOGIN = \"NotifyLogin\";\r\nconst CHATFUEL_DEFAULT_CONTACT_ID = \"2612331648778972\";\r\nconst CHATFUEL_API_CONFIG: ApiConfig = {\r\n  baseURL: `https://api.chatfuel.com/bots/${CHATFULE_BOT_ID}/users`,\r\n  timeout: 7000,\r\n};\r\nexport const sendMessagesFactory = (optionConfig?: ApiConfig) => {\r\n  const config = {\r\n    ...CHATFUEL_API_CONFIG,\r\n    ...optionConfig,\r\n  };\r\n  const instance = axios.create(config);\r\n\r\n  const sendMessages = async (kid: Kid, messageType: string) => {\r\n    try {\r\n      let sendResult: boolean = false;\r\n\r\n      let blockName;\r\n      switch (messageType) {\r\n        case MessageType.MESSAGE_GO_SCHOOL:\r\n          blockName = CHATFUEL_BLOCK_DIHOC;\r\n          break;\r\n\r\n        case MessageType.MESSAGE_LEAVE_SCHOOL:\r\n          blockName = CHATFUEL_BLOCK_VENHA;\r\n          break;\r\n\r\n        case MessageType.MESSAGE_ABSENT_ALLOW:\r\n          blockName = CHATFUEL_BLOCK_NGHIHOC_COPHEP;\r\n          break;\r\n\r\n        case MessageType.MESSAGE_ABSENT:\r\n          blockName = CHATFUEL_BLOCK_NGHIHOC;\r\n          break;\r\n      }\r\n\r\n      const name = encodeURI(kid.name);\r\n      for (let i = 0; i < kid.contactIds.length; i++) {\r\n        let contactId = kid.contactIds ? kid.contactIds[i].trim() : \"\";\r\n        let sendService = \"\";\r\n        let postRequest = \"\";\r\n        let sendBlock = \"\";\r\n        if (contactId.startsWith(\"m/\")) {\r\n          sendService = CHATFUEL_MESSENGER;\r\n\r\n          // remove prefix\r\n          contactId = contactId.replace(\"m/\", \"\");\r\n          sendBlock = sendService + blockName;\r\n          postRequest = `/${contactId}/send?chatfuel_token=${CHATFUEL_TOKEN}&chatfuel_message_tag=NON_PROMOTIONAL_SUBSCRIPTION&chatfuel_block_name=${sendBlock}&name=${name}`;\r\n        } else if (contactId.startsWith(\"m/\")) {\r\n          sendService = CHATFUEL_ZALO;\r\n          let zaloId = contactId.replace(\"z/\", \"\"); // remove prefix\r\n          postRequest = `/${CHATFUEL_DEFAULT_CONTACT_ID}/send?chatfuel_token=${CHATFUEL_TOKEN}&chatfuel_message_tag=NON_PROMOTIONAL_SUBSCRIPTION&chatfuel_block_name=${sendBlock}&name=${name}&zaloId=${zaloId}`;\r\n        }\r\n\r\n        console.log(\"sendMessages \");\r\n        console.log(postRequest);\r\n        const response = await instance.post(postRequest);\r\n        if (response.status !== 200) {\r\n          sendResult = sendResult || false;\r\n          // throw new Error('Server Error');\r\n        }\r\n\r\n        sendResult = true;\r\n      }\r\n\r\n      return sendResult;\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  return sendMessages;\r\n};\r\n\r\nexport const notifyLoginFactory = (optionConfig?: ApiConfig) => {\r\n  const config = {\r\n    ...CHATFUEL_API_CONFIG,\r\n    ...optionConfig,\r\n  };\r\n  const instance = axios.create(config);\r\n\r\n  const notifyLogin = async (loginUser: LoginUser) => {\r\n    let sendResult: boolean = false;\r\n    \r\n    try {\r\n\r\n      const name = encodeURI(loginUser.name);\r\n      const email = encodeURI(loginUser.email ? loginUser.email : \"\");\r\n      const picture = encodeURI(loginUser.picture ? loginUser.picture : \"\");    \r\n      \r\n      const postRequest = `/${CHATFUEL_DEFAULT_CONTACT_ID}/send?chatfuel_token=${CHATFUEL_TOKEN}&chatfuel_message_tag=NON_PROMOTIONAL_SUBSCRIPTION&chatfuel_block_name=${CHATFUEL_BLOCK_NOTIFYLOGIN}&name=${name}&email=${email}&picture=${picture}`;\r\n\r\n      console.log(\"sendMessages \");\r\n      console.log(postRequest);\r\n      const response = await instance.post(postRequest);\r\n      if (response.status !== 200) {\r\n        sendResult = sendResult || false;\r\n        // throw new Error('Server Error');\r\n      }\r\n\r\n      sendResult = true;\r\n    } catch (err) {\r\n      throw err;\r\n    }\r\n\r\n    return sendResult;\r\n  };\r\n\r\n  return notifyLogin;\r\n};\r\n","import { all, call, fork, put, takeLatest } from 'redux-saga/effects';\r\nimport * as ActionType from '../actions/actionConstants';\r\nimport { getKidList, sendMessagesTest, sendMessages, updateAirTable, getClassList, notifyLogin } from '../actions/kid';\r\nimport { getKidListFactory, sendMessagesFactory, updateAirTableFactory, getClassListFactory, notifyLoginFactory } from '../services/api';\r\nimport { Kid } from '../services/models';\r\n\r\nfunction* runGetKidList(action: ReturnType<typeof getKidList.start>) {\r\n  console.log(\"runGetKidList\" + action.payload);\r\n  const kidClass = action.payload;\r\n\r\n  try {\r\n    const api = getKidListFactory();\r\n    const result = yield call(api, kidClass);\r\n\r\n    yield put(getKidList.success(result));\r\n  } catch (error) {\r\n    yield put(getKidList.failure(error));\r\n  }\r\n}\r\n\r\nexport function* watchGetKidList() {\r\n  console.log(\"watchGetKidList\");\r\n  yield takeLatest(ActionType.GETKIDLIST_START, runGetKidList);\r\n}\r\n\r\nfunction* runGetClassList(action: ReturnType<typeof getClassList.start>) {\r\n\r\n  try {\r\n    const api = getClassListFactory();\r\n    const result = yield call(api);\r\n\r\n    yield put(getClassList.success(result));\r\n  } catch (error) {\r\n    yield put(getClassList.failure(error));\r\n  }\r\n}\r\n\r\nexport function* watchGetClassList() {\r\n  console.log(\"watchGetClassList\");\r\n  yield takeLatest(ActionType.GETCLASSLIST_START, runGetClassList);\r\n}\r\n\r\nfunction* runSendMessages(action: ReturnType<typeof sendMessages.start>) {\r\n  console.log(\"runSendMessages\");\r\n  const kidList: Kid[] = action.payload.kidList;\r\n  const messageType: string = action.payload.messageType;\r\n\r\n  for (let i = 0; i < kidList.length; i++) {\r\n    if (kidList[i].isSelected) {\r\n      try {\r\n        const api = sendMessagesFactory();\r\n        const result = yield call(api, kidList[i], messageType);\r\n\r\n        if (result) {\r\n          kidList[i].status = messageType;\r\n          yield put(sendMessages.success(kidList[i]));\r\n        }\r\n\r\n      } catch (error) {\r\n        console.log(error);\r\n        yield put(sendMessages.failure(error));\r\n      }\r\n    }\r\n  }\r\n\r\n  yield put(updateAirTable.start(kidList));\r\n\r\n}\r\n\r\nexport function* watchSendMessages() {\r\n  console.log(\"watchSendMessages\");\r\n  yield takeLatest(ActionType.SEND_MESSAGES_START, runSendMessages);\r\n}\r\n\r\nfunction* runUpdateAirTable(action: ReturnType<typeof updateAirTable.start>) {\r\n  console.log(\"runUpdateAirTable\");\r\n  const kidList = action.payload;\r\n\r\n  try {\r\n    const api = updateAirTableFactory();\r\n    const result = yield call(api, kidList);\r\n\r\n    yield put(updateAirTable.success(result));\r\n  } catch (error) {\r\n    yield put(updateAirTable.failure(error));\r\n  }\r\n}\r\n\r\nexport function* watchUpdateAirTable() {\r\n  console.log(\"watchUpdateAirTable\");\r\n  yield takeLatest(ActionType.UPDATE_AIRTABLE_START, runUpdateAirTable);\r\n}\r\n\r\nfunction* runNotifyLogin(action: ReturnType<typeof notifyLogin>) {\r\n  console.log(\"runUpdateAirTable\");\r\n  const loginUser = action.payload;\r\n\r\n  let result = false;\r\n  try {\r\n    const api = notifyLoginFactory();\r\n    result = yield call(api, loginUser);\r\n\r\n  } catch (error) {\r\n    console.log(error);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\nexport function* watchNotifyLogin() {\r\n  console.log(\"watchUpdateAirTable\");\r\n  yield takeLatest(ActionType.LOGIN_NOTIFICATION, runNotifyLogin);\r\n}\r\n\r\nexport default function* rootSaga() {\r\n  console.log(\"rootSaga\");\r\n  yield all([fork(watchGetKidList), \r\n            fork(watchGetClassList), \r\n            fork(watchSendMessages), \r\n            fork(watchUpdateAirTable),\r\n            fork(watchNotifyLogin)]);\r\n}\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\n/* eslint func-style: 'off' */\n/* eslint no-param-reassign: 'off' */\n/* eslint no-use-before-define: 'off' */\n/* eslint '@typescript-eslint/no-use-before-define': 'off' */\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\ninterface Config {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n}\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href,\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA',\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.',\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter, HashRouter } from 'react-router-dom';\nimport { applyMiddleware, createStore } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport createSagaMiddleware from 'redux-saga';\nimport App from './App';\nimport './index.css';\nimport reducer from './reducers/kid';\nimport rootSaga from './sagas/kidList';\nimport * as serviceWorker from './serviceWorker';\nimport './styles/semantic.min.css';\n\n\n\nconst sagaMiddleWare = createSagaMiddleware();\nconst store = createStore(reducer, composeWithDevTools(applyMiddleware(sagaMiddleWare)));\n\nReactDOM.render(\n  <Provider store={store}>\n    <HashRouter>\n      <App />\n    </HashRouter>\n  </Provider>,\n  document.getElementById('root') as HTMLElement,\n);\n\nserviceWorker.unregister();\nsagaMiddleWare.run(rootSaga);\n"],"sourceRoot":""}